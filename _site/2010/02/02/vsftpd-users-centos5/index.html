<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>vsftpd users on Centos 5</title>
   <meta name="author" content="Gerhard Lazu" />
   <link href="http://feeds.feedburner.com/gerhardlazu" rel="alternate" title="Gerhard Lazu" type="application/atom+xml" />
   <link rel="stylesheet" href="/stylesheets/pygments.css" type="text/css" />
   <link rel="stylesheet" href="/stylesheets/jekyll.css" type="text/css" media="screen, projection" />
   <link rel="stylesheet" href="/stylesheets/gerhardlazu.css" type="text/css" media="screen, projection" />
</head>
<body>

<div class="site">
  <div class="title">
    <a href="/">Gerhard Lazu</a>
    <a class="extra" href="/glz_custom_fields.html">glz_custom_fields</a>
  </div>
  
  <div id="post">
<h1>vsftpd users on Centos 5</h1>
<p>If you&#8217;re like me and do your server administration from the terminal (GUIs are for kids), then you must have come across the <span class="caps">FTP</span> issue. You have clients which design and develop websites for other people. These people require <span class="caps">FTP</span> access to their websites to upload the odd PDFs or DOCs. Some are just static websites so they don&#8217;t have a fancy CMSes with upload functionalities.</p>
<p>For example, I store all my stuff on the server in <strong>/home/gerhard</strong>:</p>
<div class="highlight"><pre><code class="bash"><span class="o">[</span>gerhard@konnichiwa ~<span class="o">]</span><span class="nv">$ </span>tree -d -L 1
.
|-- archive.gerhardlazu.com
|-- carmina.lazu.co.uk
|-- gerhardlazu.com
|-- lazu.co.uk
<span class="sb">`</span>-- lazu.ro -&gt; lazu.co.uk
</code></pre>
</div><p>So what happens if I want to allow Carmina <span class="caps">FTP</span> access to <strong>carmina.lazu.co.uk</strong> without her seeing the other folders?</p>
<div class="highlight"><pre><code class="bash"><span class="o">[</span>gerhard@konnichiwa ~<span class="o">]</span><span class="nv">$ </span>sudo adduser -d /home/gerhard/carmina.lazu.co.uk carmina -s /sbin/nologin
Password:
<span class="o">[</span>gerhard@konnichiwa ~<span class="o">]</span><span class="nv">$ </span>sudo passwd carmina
Changing password <span class="k">for </span>user carmina.
New UNIX password: 
Retype new UNIX password: 
passwd: all authentication tokens updated successfully.
</code></pre>
</div><p>Just to be sure, let&#8217;s try and access the server via <span class="caps">SSH</span> with this account. After all, we just created a new system user:</p>
<div class="highlight"><pre><code class="bash">snowy âžœ  ~  ssh carmina@konnichiwa
carmina@xxx.xxx.xxx.xxx password:
This account is currently not available.
Connection to xxx.xxx.xxx.xxx closed.
</code></pre>
</div><p>And that&#8217;s it. No virtual users, no messing about with pam.d. It takes a few seconds and it&#8217;s as secure as your system setup.</p>
<p>This article assumes you already have <a href="http://vsftpd.beasts.org/">vsftpd</a> installed on the system.</p>
</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>09 Jan 2010</span> &raquo; <a href="/2010/01/09/-ubuntu-karmic-koala-9.10-nfs-mounts-in-os-x-snow-leopard/">Ubuntu Karmic Koala 9.10 NFS mounts in OS X Snow Leopard</a></li>
    
      <li><span>15 Jan 2010</span> &raquo; <a href="/2010/01/15/40-psi-makes-all-the-difference/">40psi makes all the difference</a></li>
    
      <li><span>02 Jan 2010</span> &raquo; <a href="/2010/01/02/glz_custom_fields-v1.2.4-released/">glz_custom_fields v1.2.4 released</a></li>
    
  </ul>
</div>
  
  <div class="footer">
    <div class="contact">
      <p>
        Gerhard Lazu<br />
        gerhard@lazu.co.uk
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/gerhard/">github.com/gerhard</a><br />
        <a href="http://twitter.com/gerhardlazu/">twitter.com/gerhardlazu</a><br />
        <a href="http://flickr.com/photos/gerhardlazu/">flickr.com/photos/gerhardlazu</a>
      </p>
    </div>
    <div class="rss">
      <a href="http://feeds.feedburner.com/gerhardlazu">
        <img src="/images/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
</div>

<a href="http://github.com/gerhard"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-106574-1");
pageTracker._trackPageview();
</script>

</body>
</html>
